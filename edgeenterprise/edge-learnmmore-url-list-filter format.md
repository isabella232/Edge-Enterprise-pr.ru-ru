---
title: Формат фильтрации для политик URL-адресов Microsoft Edge
ms.author: brianalt
author: dan-wesley
manager: srugh
ms.date: 06/29/2021
audience: ITPro
ms.topic: conceptual
ms.prod: microsoft-edge
ms.localizationpriority: medium
ms.collection: M365-modern-desktop
description: Сведения о формате фильтрации, используемом для политик URLBlocklist и URLAllowlist в Microsoft Edge.
ms.openlocfilehash: e178dad518ff4bee07bf89d9faca3231ee6cf246
ms.sourcegitcommit: 8968f3107291935ed9adc84bba348d5f187eadae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2021
ms.locfileid: "11979588"
---
# <a name="filter-format-for-url-list-based-policies"></a>Формат фильтрации для политик на основе списка URL-адресов

В этой статье описывается формат фильтрации, используемый для политик на основе списка URL-адресов Microsoft Edge (например, [URLBlocklist](microsoft-edge-policies.md#urlblocklist), [URLAllowList](microsoft-edge-policies.md#urlallowlist) и [CertificateTransparencyEnforcementDisabledForUrls](microsoft-edge-policies.md#certificatetransparencyenforcementdisabledforurls).

> [!NOTE]
> Эта статья относится к Microsoft Edge версии 77 или более поздней.

## <a name="the-filter-format"></a>Формат фильтрации

Используется следующий формат фильтрации:

```
    [scheme://][.]host[:port][/path][@query]
```

Поля в формате фильтрации:

| Поле | Описание |
| --- | --- |
| **схема** (*необязательно*) | Это может быть http://, https://, ftp://, edge:// и т. д. |
| **узел** (*обязательно*) | Это должно быть действительное имя узла. Также можно использовать подстановочный знак ("\*"). Для отключения сопоставления дочерних доменов добавьте необязательную точку (".") перед **узлом**. Можно указать имя узла литерала IP-адреса, но подстановочные знаки не поддерживаются для имени узла литерала IP-адреса. |
| **порт** (*необязательно*) | Допускаются значения в диапазоне от 1 до 65535. |
| **путь** (*необязательно*) | В пути можно использовать любую строку. |
| **запрос** (*необязательно*) | **Запрос** — это маркеры типа "ключ-значение" или "ключ", разделенные амперсандом ("&"). Маркеры типа "ключ-значение" следует разделять знаком равенства ("="). Чтобы обозначить сопоставление префиксов, можно использовать звездочку ("\*") в конце **запроса**. |

## <a name="comparing-the-filter-format-to-the-url-format"></a>Сравнение формата фильтрации с форматом URL-адреса

Формат фильтрации похож на формат URL-адреса, за исключением следующих различий:

- При добавлении элемента "user:pass" он будет игнорироваться. Например, http://user:pass@ftp.contoso.com/pub/example.iso.
- При добавлении идентификатора фрагмента ("#") он и все следующие за ним элементы игнорируются.
- В качестве **узла** можно использовать подстановочный знак ("*"). Перед ним можно поставить точку (".").
- В качестве суффикса **узла**можно использовать косую черту ("/") или точку ("."). В этом случае суффикс игнорируется.

## <a name="filter-selection-criteria"></a>Условия выбора фильтра

Выбранный для URL-адреса фильтр — это наиболее точное совпадение, находимое после обработки следующих правил выбора фильтра.

1. Сначала выбираются фильтры самым длинным совпадением **узла**.
2. Из выбранных фильтров все фильтры с несовпадающими схемами или портами отклоняются.
3. Из оставшихся фильтров выбирается фильтр с самым длинным совпадающим **путем**.
4. Из оставшихся фильтров выбирается фильтр с самым длинным набором маркеров запросов. На этом этапе фильтр списка разрешений имеет приоритет над фильтром списка блокировок, если оба фильтра имеют одинаковую длину **пути** и количество маркеров **запросов**.
5. Если допустимого фильтра нет, то крайний левый дочерний домен удаляется из **узла**, а процесс выбора начинается с шага 1. Поиск **узла**, отмеченного звездочкой ("*"), выполняется в последний момент, и он сопоставляется со всеми узлами.
6. Если фильтр доступен, он блокирует или разрешает URL-запрос.

   >[!NOTE]
   >Запрос URL-адреса разрешен по умолчанию при отсутствии совпадений при фильтрации.

## <a name="example-filter-selection-criteria"></a>Пример условий выбора фильтра

В этом примере при поиске совпадения с "https://sub.contoso.com/docs" средство выбора фильтра будет выполнять следующие действия.

1. Выполнять поиск фильтра "sub.contoso.com". Если фильтр найден, поиск переходит к шагу 2. Если фильтр не найден, средство выбора фильтра попытается снова выполнить поиск фильтра по элементам "contoso.com", "com" и, наконец, "".
2. Из выбранных фильтров все фильтры без элемента "http" в **схеме** удаляются.
3. Из оставшихся фильтров все фильтры с точным номером порта, отличным от "80", удаляются.
4. Из оставшихся фильтров все фильтры без префикса "/docs" для **пути**, удаляются.
5. Из оставшихся фильтров выбирается и применяется фильтр с самым длинным префиксом пути. Если фильтр не найден, процесс выбора начинается снова с шага 1. Процесс повторяется со следующим дочерним доменом.

### <a name="additional-filter-information"></a>Дополнительные сведения фильтрации

Если в фильтре перед **узлом** стоит точка ("."), фильтруются только точные совпадения **узла**. Пример

- "contoso.com" (без точки) будет сопоставляться с "contoso.com", "www.contoso.com" и "sub.www.contoso.com"
- ".www.contoso.com" (с точкой-префиксом) будет сопоставляться только с "www.contoso.com"

Вы можете использовать как стандартную, так и пользовательскую **схему**. Поддерживаются следующие стандартные схемы:

- _about_, _blob_, _content_, _edge_, _cid_, _data_, _file_, _filesystem_, _ftp_, _gopher_, _http_, _https_, _javascript_, _mailto_, _ws_ и _wss_.

Любая другая **схема** рассматривается как пользовательская**схема**, однако допускается использование только шаблонов _schema:*_ и _schema://*_. Например:

- "custom:\*" или "custom://\*" будет сопоставляться с "custom:app"
- "custom:app" или "custom://app" являются недопустимыми

**схема** и **узел** не чувствительны к регистру. Пример

- Фильтр "http://contoso.com" совпадает с "HTTP://contoso.com", "http://contoso.COM "и "http://contoso.com"

**путь** и **запрос** чувствительны к регистру. Пример

- Фильтр "http://contoso.com/path?query=A" не совпадает с "http://contoso.com/Path?query=A" или "http://contoso.com/path?Query=A". Он совпадает с "http://contoso.COM/path?query=A".

## <a name="content-license"></a>Лицензия на содержимое

> [!NOTE]
> Некоторые части этой страницы представляют собой измененные материалы, созданные и предоставленные на сайте Chromium.org. Их использование регулируется условиями, описанными в [лицензии Creative Commons Attribution 4.0 International License](http://creativecommons.org/licenses/by/4.0/). Исходная [страница Chromium находится здесь](https://www.chromium.org/administrators/url-blacklist-filter-format).
  
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />Эта работа предоставляется в рамках международной лицензии <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.

## <a name="see-also"></a>См. также

- [Целевая страница Microsoft Edge Enterprise](https://aka.ms/EdgeEnterprise)
