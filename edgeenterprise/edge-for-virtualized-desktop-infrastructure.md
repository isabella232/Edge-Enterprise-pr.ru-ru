---
title: Edge для инфраструктуры виртуальных рабочих столов
ms.author: anlake
author: AndreaLBarr
manager: collw
ms.date: 06/29/2021
audience: ITPro
ms.topic: conceptual
ms.prod: microsoft-edge
ms.localizationpriority: medium
ms.collection: M365-modern-desktop
description: Microsoft Edge для инфраструктуры виртуальных рабочих столов.
ms.openlocfilehash: 5dc234b0e6fbba4778f8236399a0ff438f704578
ms.sourcegitcommit: 8968f3107291935ed9adc84bba348d5f187eadae
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2021
ms.locfileid: "11980043"
---
# <a name="microsoft-edge-for-virtualized-desktop-infrastructure"></a>Microsoft Edge для инфраструктуры виртуальных рабочих столов

В этой статье описываются требования и ограничения, относящиеся к использованию Microsoft Edge в виртуальной среде.

## <a name="what-is-vdi"></a>Что такое VDI?

Инфраструктура виртуальных рабочих столов (VDI) — это технология виртуализации, размещающая операционную систему и приложения компьютера на централизованном сервере в центре обработки данных. Это позволяет обеспечивать для пользователей полностью персонализированный интерфейс рабочего стола с полностью защищенным и соответствующим требованиям централизованным источником.

Microsoft Edge можно использовать в такой виртуальной среде практически так же, как и на локальном устройстве, при этом он будет работать в безопасной и управляемой серверной среде. В зависимости от выбранного вами решения VDI можно также предоставить вашим пользователям беспрепятственный доступ к приложениям и сайтам интрасети.

Большинство функций Edge поддерживаются в средах VDI без какой-либо особой конфигурации. Однако для обеспечения оптимальной работы рекомендуется следовать приведенной ниже инструкции.

## <a name="platforms-certified-for-edge"></a>Платформы, сертифицированные для Edge

- Виртуальный рабочий стол Azure
- Виртуальные приложения и рабочие столы Citrix (ранее известные как XenApp и XenDesktop)

Хотя другие решения VDI еще не проверены командой Edge, ожидается, что наиболее распространенные рабочие процессы в Edge должны поддерживаться. Руководство, приведенное ниже, может как соответствовать, так и не соответствовать выбранному вами решению.

## <a name="edge-on-vdi-performance-considerations"></a>Вопросы производительности Edge в VDI

При создании среды VDI для достижения оптимальной производительности вам необходимо внимательно учитывать рабочие процессы и потребности своих пользователей, а также ограничения, связанные с конфигурацией сервера.

Edge рекомендует следующие минимальные требования к развертыванию Edge в средах VDI:

- vCPU — 2–4 ядра на пользователя
- ОЗУ — 1 ГБ на пользователя

Обратите внимание: для больших сложных веб-приложений и расширений потребуется больше памяти, и это необходимо учитывать в конфигурации среды.

## <a name="edge-on-non-persisted-vdi-environments"></a>Edge для несохраняемой среды VDI

Многие решения VDI позволяют получать доступ к сохраняемой среде, где пользователям назначается виртуальная среда, которая сохраняется между сеансами, и к несохраняемой среде, где пользователям назначается одна из нескольких доступных машин (возможно, новая машина каждый новый сеанс), при этом пользовательские данные могут синхронизироваться или не синхронизироваться между сеансами.

При использовании несохраняемой среды обычно создается "золотой образ", который используется для каждого устройства и включает необходимые приложения и конфигурации. Ниже приведены наши рекомендации по подготовке Edge для такого образа.

### <a name="deploy-edge"></a>Развертывание Edge

Если вы используете Windows 10 версии 1803 или более поздней, Microsoft Edge уже должен быть установлен в вашей системе. Однако, если вы используете старую версию Windows или хотите развернуть другой канал Edge, рекомендуется выполнить следующие действия.

1. Скачайте пакет Edge MSI, соответствующий операционной системе вашей виртуальной машины VDI, перейдя по следующей ссылке:

    - [Скачивание Microsoft Edge для бизнеса — Майкрософт](https://www.microsoft.com/edge/business/download)

2. Установите MSI на виртуальную машину VDI, запустив следующую команду:

    - `msiexec /i <path_to_msi> /qn /norestart /l*v <install_logfile_name>`

### <a name="disable-automatic-updates"></a>Отключение автоматических обновлений

Для несохраняемых машин лучше отключить автоматические обновления, вместо этого обновляя Edge путем обновления "золотого образа", чтобы исключить несоответствие версий в пуле машин.

См. следующие политики отключения автоматических обновлений.

- [Переопределение политики обновления по умолчанию](/deployedge/microsoft-edge-update-policies#updatedefault)

- [Переопределение политики обновления](/deployedge/microsoft-edge-update-policies#update)

### <a name="profile-management"></a>Управление профилем

При настройке несохраняемых машин важно учитывать, что виртуальные машины могут не сохранять данные пользователя между сеансами и что пользователю может быть назначена виртуальная машина, которую они никогда не использовали раньше и на которой поэтому нет их пользовательских данных.

Edge поддерживает несколько методов синхронизации пользовательских данных, с тем чтобы обеспечить их доступность независимо от того, как осуществляется доступ к Edge.

### <a name="azure-ad-sync"></a>Синхронизация Azure AD

Если ваш план Azure AD поддерживает этот вариант, корпоративная синхронизация является самым быстрым и простым методом синхронизации пользовательских данных Edge со всеми устройствами пользователей.  

Ниже приведена более подробная информация о требованиях и конфигурации.  

- [Настройка корпоративной синхронизации Microsoft Edge | Документация Майкрософт](/deployedge/microsoft-edge-enterprise-sync)

### <a name="on-premise-sync-for-active-directory-users"></a>Локальная синхронизация для пользователей Active Directory

При локальной синхронизации Microsoft Edge сохраняет избранное и параметры пользователя Active Directory в файл, который можно легко перемещать между компьютерами.  

Ниже приведена более подробная информация о требованиях и конфигурации.  

- [Локальная синхронизация для пользователей Active Directory (AD) | Документация Майкрософт](/deployedge/microsoft-edge-on-premises-sync)

### <a name="user-profile-redirection"></a>Перенаправление профилей пользователей  

Существует несколько решений по переносу и перенаправлению всей папки пользователя для сохранения пользовательского контекста в таких несохраняемых средах. Обратитесь к поставщику VDI, который порекомендует вам подходящее решение.

Среди популярных решений следующие.

- [Обзор FSLogix — FSLogix | Документация Майкрософт](/fslogix/overview)
- [Настройка управления профилем Citrix](https://support.citrix.com/article/CTX222893)

Кроме того, можно порекомендовать, чтобы при использовании этого метода ненужные папки были исключены из подлежащей резервному копированию папки пользователя, чтобы сократить время начальной загрузки при входе пользователей в машину и миграции профиля. В этом случае мы рекомендуем исключить следующие папки из резервного копирования, чтобы уменьшить размер.

- %LocalAppData%\Microsoft\Edge\User Data\Default\Cache
- %LocalAppData%\Microsoft\Edge\User Data\Default\Code Cache
- %LocalAppData%\Microsoft\Edge\User Data\Default\JumpListIconsTopSites
- %LocalAppData%\Microsoft\Edge\User Data\Default\JumpListIconsRecentClosed

## <a name="known-issues"></a>Известные проблемы

### <a name="microsoft-edge-crashes-in-older-versions-of-xenapp-and-xendesktop"></a>Сбой Microsoft Edge в старых версиях XenApp и XenDesktop

Эта проблема должна быть устранена в более новых версиях, однако если вы столкнулись с ней в вашей среде, в качестве временного решения можно отключить Citrix API Hooks для Edge — см. статью [Как отключить Citrix API Hooks на основе конкретных приложений](https://support.citrix.com/article/CTX107825).

### <a name="degraded-performance-when-rendering-pages-with-exceptionally-large-html-tables"></a>Ухудшение производительности при отрисовки страниц с очень большими таблицами HTML

Известно, что следующие политики Citrix замедляют отрисовку HTML-страниц с очень большими таблицами (более 30 000 строк).

- Автоматическое отображение клавиатуры
- Удаленное поле со списком

Подробности см. в разделе [Настройки политик для мобильного интерфейса (citrix.com)](https://docs.citrix.com/citrix-virtual-apps-desktops/policies/reference/ica-policy-settings/mobile-experience-policy-settings.html). Отключение этих политик должно устранить проблему.

### <a name="windows-account-manager-authorization-scenarios-ie--azure-sync-fail-in-edge-when-run-as-a-citrix-seamless-application"></a>Сбой сценариев авторизации диспетчера учетных записей Windows (например, синхронизации Azure) в Edge при запуске в качестве удаленного приложения Citrix

Это известная проблема в Edge и других приложениях, использующих WAM (например, Office), возникающая из-за отсутствия инициализации компонентов Windows, необходимых для таких сценариев, при работе в удаленном режиме. Ниже приведены действия для временного решения этой проблемы.

- Использование Edge в режиме удаленного рабочего стола в Citrix Host вместо режима удаленного приложения.
- Используйте удаленные приложения для виртуального рабочего стола Azure, в которых предусмотрены меры для решения этой проблемы.
