---
title: Внутреннее тестирование расширений Microsoft Edge
ms.author: aspoddar
author: AndreaLBarr
manager: balajek
ms.date: 06/29/2021
audience: ITPro
ms.topic: conceptual
ms.prod: microsoft-edge
ms.localizationpriority: medium
ms.collection: M365-modern-desktop
description: Узнайте, как упаковать расширения Microsoft Edge и выполнить их внутреннее тестирование на предприятии.
ms.openlocfilehash: c258a2aafca83ed19ffea9160efe09b4a73c920da07b5aac7a0d5ef546db4822
ms.sourcegitcommit: d44c0997ffe40d67421312ed96e7766da947eaa0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "11726828"
---
# <a name="self-host-microsoft-edge-extensions"></a>Внутреннее тестирование расширений Microsoft Edge

Эта статья содержит основные рекомендации по упаковке расширения для размещения в собственном интернет-магазине. В ней вы также найдете инструкции по развертыванию расширений для устройств и пользователей в организации.

## <a name="prerequisites"></a>Предварительные условия

Для выполнения внутреннего тестирования собственных расширений необходимо предоставить собственные службы веб-хостинга для расширений и их файлов манифеста.

 Следующие действия предполагают, что вы уже создали расширение, имеете некоторый опыт работы с XML-файлами, имеете рабочие знания по настройке групповой политики и знаете, как использовать реестр Windows.

## <a name="publish-an-extension"></a>Публикация расширения

Перед публикацией расширения его необходимо упаковать в файл CRX (расширение Chrome). В качестве руководства по упаковке расширения в качестве файла CRX используйте следующие действия.

1. В адресной строке Microsoft Edge перейдите в *edge://extensions* и включите **режим разработчика**, если он еще не включен.
2. В разделе **Установленные расширения** щелкните **Расширение пакета**, чтобы создать файл CRX.
3. Используйте диалоговое окно **Расширение пакета**, чтобы найти каталог с источником расширения. Выберите каталог и нажмите кнопку **Расширение пакета**.  Это создаст файл CRX вместе с файлом PEM. Сохраните файл PEM, так как он необходим для обновления версии расширения. На следующем снимке экрана показано диалоговое окно **Расширение пакета** для размещения корневого каталога расширения.

   :::image type="content" source="media/microsoft-edge-manage-extensions-webstore/manage-extensions-pack-dialog.png" alt-text="Диалоговое окно расширения пакета для поиска исходного кода расширения.":::

   > [!IMPORTANT]
   > Сохраните файл PEM в безопасном месте, потому что это ключ для расширения и он понадобится для будущих обновлений.

4. Перетащите файл CRX в окно расширений и убедитесь, что он загружается.
5. Проверьте расширение и обратите внимание на поле идентификатора (это ИД CRX) и номер версии. Эти сведения потребуются позже. На следующем снимке экрана показано тестовое расширение с его ИД CRX.

   :::image type="content" source="media/microsoft-edge-manage-extensions-webstore/manage-extensions-test-extension.png" alt-text="Пример расширения, показывающий ИД CRX":::

6. Отправьте CRX-файл на узел и обратите внимание на URL-адрес расположения, из которого он будет скачан. Эти сведения необходимы для XML-файла манифеста.
7. Чтобы создать XML-файл манифеста с ИД приложения или расширения, URL-адресом загрузки и версией, определите следующие поля:  

   - **appid** — ИД расширения из шага 5
   - **codebase** — расположение скачанного файла CRX из шага 6
   - **версия** — версия приложения или расширения, которая должна соответствовать версии, указанной в манифесте расширения.

   В следующем фрагменте кода показан пример XML-файла манифеста.

   ```xml
   <?xml version='1.0' encoding='UTF-8'?> 
   <gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'> 
     <app appid='ekilpdeokbpjmminmhfcgkncmmohmfeb'> 
     <updatecheck codebase='https://app.somecompany.com/extensionfolder/helloworld.crx' version='1.0' /> 
     </app> 
   </gupdate> 
   ```

   Дополнительные сведения см. в статье [Автоматическое обновление расширений в Microsoft Edge — Разработка Microsoft Edge](/microsoft-edge/extensions-chromium/enterprise/auto-update).

8. Добавьте готовый XML-файл в папку, из которой его можно скачать, с помощью URL-адреса. Этот URL-адрес потребуется при установке расширения с помощью групповой политики. См. статью [Распространение частного расширения](#distribute-a-privately-hosted-extension).

   > [!IMPORTANT]
   > Расположение размещения расширения не требует проверки подлинности. Оно должно быть доступно на устройствах пользователей, где бы они ни использовались.

## <a name="publish-updates-to-an-extension"></a>Публикация обновлений для расширения

После изменения и проверки обновленного расширения его можно опубликовать. Используйте следующие действия в качестве руководства для публикации обновления.

1. Измените номер версии в файле manifest.JSON расширения до более высокого числа с использованием следующего синтаксиса: `"version":"versionString"`. Если "версия" — "1.0", то ее можно обновить до "версии" — "1.1" или любого числа выше "1.0".
2. Обновите "версию" `<updatecheck>` в XML-файле, чтобы она соответствовала номеру, который вы указали в файле манифеста на предыдущем шаге. Например:<br>`<updatecheck codebase='https://app.somecompany.com/extensionfolder/helloworld.crx' version='1.1' />`
3. Создайте файл CRX, который включает новые изменения. Перейдите на страницу *edge://extensions* и включите **режим разработчика**.
4. Щелкните **Расширение пакета** и перейдите в каталог для источника расширения.

   > [!IMPORTANT]
   > Используйте тот же PEM-файл, который был создан и сохранен при первом создании CRX-файла. Если вы не используете тот же файл PEM, идентификатор приложения для расширения изменится и обновление будет рассматриваться как новое расширение.

5. Перетащите CRX-файл в окно расширений и убедитесь, что он загружается. После этой операции расширение будет отключено. Чтобы включить его, добавьте CRX-ID расширения в политику ExtensionInstallAllowList. 
6. Проверьте обновленное расширение.
7. Замените старый CRX-файл и XML-файл новыми файлами для обновленного расширения.

Изменения расширения будут внесены в ходе следующего цикла синхронизации политики. Дополнительные сведения об обновлении расширений см. в разделах [Обновление URL-адреса](/microsoft-edge/extensions-chromium/enterprise/auto-update#update-url) и [Обновление манифеста](/microsoft-edge/extensions-chromium/enterprise/auto-update#updated-manifest).

## <a name="distribute-a-privately-hosted-extension"></a>Распространение частного расширения

Вы можете поделиться ссылкой на расположение, в котором находится CRX-файл, и как только пользователи введут URL-адрес в браузере, расширение будет загружено и установлено. Пользователи могут включить расширение со страницы edge://extensions. Чтобы разрешить пользователям устанавливать самообучаемые расширения, необходимо добавить их в политику [ExtensionInstallAllowList](/deployedge/microsoft-edge-policies#extensioninstallallowlist) и добавить URL-адрес расположения, где находится файл CRX, в политику [ExtensionInstallSources.](/deployedge/microsoft-edge-policies#extensioninstallsources)

Кроме того, можно использовать групповую политику [ExtensionInstallForceList](/deployedge/microsoft-edge-manage-extensions-policies#force-install-an-extension) для принудительной установки расширения на устройства пользователей.

Эти политики можно применить к выбранным пользователям, устройствам или обоим. Однако помните, что обновления политики не происходят мгновенно и потребуется время, чтобы параметры политики вступили в силу.

## <a name="see-also"></a>См. также

- [Управление расширениями Microsoft Edge на предприятии](microsoft-edge-manage-extensions.md)
- [Использование групповых политик для управления расширениями Microsoft Edge](microsoft-edge-manage-extensions-policies.md)
- [Подробное руководство по политике ExtensionSettings](microsoft-edge-manage-extensions-ref-guide.md)
- [Вопросы и ответы по расширениям Microsoft Edge](microsoft-edge-manage-extensions-faq.md)
- [Целевая страница Microsoft Edge Enterprise](https://aka.ms/EdgeEnterprise)
